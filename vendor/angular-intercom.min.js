!function(t,n){"function"==typeof define&&define.amd?define(["angular","intercom"],function(t,e){return n({},t,e)}):"object"==typeof exports?module.exports=n({},require("angular"),require("intercom")):angular&&n(t,t.angular,t.Intercom)}(this,function(t,n,e){"use strict";function r(t){return t?t.charAt(0).toUpperCase()+t.substring(1).toLowerCase():""}e&&t&&!t.Intercom&&(t.Intercom=e);var o=t.IntercomSettings||t.intercomSettings,a=!1;if(n.isFunction(e))t.Intercom("reattach_activator"),o&&t.Intercom("update",o),a=!0;else{var c=function(){c.c(arguments)};c.q=[],c.c=function(t){c.q.push(t)},t.Intercom=c}return n.module("ngIntercom",[]).value("IntercomSettings",{}).provider("$intercom",function(){function o(t,n){if(document){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=t+n;var r=document.getElementsByTagName("head")[0];r.appendChild(e)}}var c=this,i={asyncLoading:!1,scriptUrl:"https://widget.intercom.io/widget/",appID:"",development:!1};n.forEach(i,function(t,n){c[n]=function(e){return i[n]=e||t,c}}),c.$get=["$rootScope","IntercomSettings",function(c,p){function u(){return t.Intercom.apply(e,arguments),this}function s(t,n){u[n]=t,u["$"+n]=function(){return t.apply(e,arguments),c.$$phase||c.$apply(),u}}var d={};i.appID&&(d.app_id=d.app_id||i.appID),n.extend(d,p),a&&(t.Intercom("reattach_activator"),t.Intercom("update",d)),i.asyncLoading&&o(i.scriptUrl,i.appID);var m={boot:function(e){return n.extend(d,e||{}),!d.app_id&&i.appID&&(d.app_id=i.appID),e.app_id&&e.app_id!==d.app_id&&(d.app_id=e.app_id),t.Intercom("boot",d),u},update:function(n){return n?(!n.app_id&&i.appID&&(n.app_id=i.appID),n.app_id&&n.app_id!==i.app_id&&(i.app_id=n.app_id),t.Intercom("update",n)):t.Intercom("update"),console.log("update data",n),u},trackEvent:function(n,e){return t.Intercom("trackEvent",n,e),u},showMessages:function(n){return n?t.Intercom("showMessages",n):t.Intercom("showMessages"),u},hideMessages:function(){return t.Intercom("hideMessages"),u},shutdown:function(){return t.Intercom("shutdown"),u},hide:function(){return t.Intercom("hide"),u},show:function(){return t.Intercom("show"),u},reattachActivator:function(){return t.Intercom("reattach_activator"),u}};n.forEach(m,s);var f={show:!0,hide:!0,activatorClick:!0};return u.$on=function(n,e){return f[n]?(t.Intercom("on"+r(n),function(){console.log("on",n),c.$$phase?e():c.$apply(e)}),u):void 0},u.on=function(n,e){return f[n]?(t.Intercom("on"+r(n),e),u):void 0},u._extend=function(n){n&&s(n,function(){var r=Array.prototype.slice.call(arguments);return t.Intercom.apply(e,r.unshift(n)),u})},u}]}).provider("Intercom",function(){this.$get=["$intercom","$log",function(t,n){return n.warn("Please use $intercom rather than Intercom https://github.com/gdi2290/angular-intercom"),t}]}),n.module("angular-intercom",["ngIntercom"]),n.module("ngIntercom")});
